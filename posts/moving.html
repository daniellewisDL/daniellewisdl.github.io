<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Genuary++</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>body {background-color: rgb(255,255,233); font-family: monospace; border-width: 0; margin:0; padding:0; overflow: hidden;}</style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js"></script>
  </head>

  <body>
    <div id="canvas"></div>
    <script>
      
      var s = function( p ) {

          let width = p.windowWidth
          let height = p.windowHeight
          let offsetIncrements = 0.05
          let horizLineCount = 200
          let vertLineCount = p.random(30,80)
          let widthMultiplier = p.random(2,20)
          let topYMultiplier = p.random([1/6,2/6,3/6,4/6,5/6])
          let speed = 10
          let lineOffset = 0
          p.pixelDensity(1)
          
          p.windowResized = function() {
            p.resizeCanvas(p.windowWidth, p.windowHeight);
            fullReset()
          }

          function fullReset() {
            width = p.windowWidth
            height = p.windowHeight
            horizLineCount = 50
            vertLineCount = p.random(30,80)
            widthMultiplier = p.random(2,20)
            lineOffset = 0
          }

          p.setup = function() {
            p.createCanvas(width,height)
            p.frameRate(20)
            p.background(255, 254, 233)
            // p.noFill()
          }

          p.draw = function() {
            // p.background(255, 254, 233)
            p.background(0)
            if (horizLineCount>100) {
              horizLineCount-=3} else {
                horizLineCount = 200
              }
            
            drawGrid()
            lineOffset = (lineOffset>speed*50)?0:lineOffset+speed
          }

          function drawGrid() {
            p.stroke("green")
            p.strokeWeight(0.5)

            // draw horiz lines
            let topY = topYMultiplier*height
            let horizSpace = height - topY
            let yIncrementorBase = Math.log(horizSpace) / Math.log (horizLineCount)
            for (let i = 0; i < horizLineCount; i++) {
              p.line(0,topY+yIncrementorBase**i,width,topY+yIncrementorBase**i)
            }

            // draw vert lines
            let xIncrementor = width/vertLineCount
            for (let i = 0; i < vertLineCount; i++) {
              p.line(i*xIncrementor,topY+1,p.map(i*xIncrementor,0,width,-width*widthMultiplier,width*widthMultiplier),height)
            }

            // draw backGrid

            // for (let i = 0; i < vertLineCount; i++) {
            //   p.line(i*xIncrementor,topY,i*xIncrementor,0)
            // }
            // for (let i = 0; i < topY/xIncrementor; i++) {
            //   p.line(0,i*xIncrementor,width,i*xIncrementor)
            // }

          }

      }
      
      let myp5 = new p5(s, "canvas")

    </script>
  </body>
</html>
