<!DOCTYPE html>
<html lang="en">
  <head>
    <title>squires</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <style>body { background-color: rgb(0, 0, 0); font-family: monospace; border-width: 0; margin:0; padding:0; overflow: hidden;}</style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js"></script>
  </head>

  <body>
	<div id="canvas"></div>
    <script>

		let s = function( p ) {

			const htmlColors = ['Black','DarkGreen','Navy','Maroon','Green','DarkBlue','DarkRed','MidnightBlue','MediumBlue','DarkSlateGray','Indigo','ForestGreen','SaddleBrown','DarkOliveGreen','FireBrick','Brown',
								'Blue','Lime','Red','Olive','Teal','Purple','SeaGreen','DarkSlateBlue','DarkCyan','DarkMagenta','OliveDrab','Sienna','Crimson','LimeGreen','RebeccaPurple','DimGray','OrangeRed','DarkGoldenrod',
								'Chocolate','MediumSeaGreen','MediumVioletRed','DarkViolet','LawnGreen','SteelBlue','LightSeaGreen','Chartreuse','SpringGreen','Gray','SlateGray','IndianRed','RoyalBlue','DarkOrange',
								'Peru','SlateBlue','MediumSpringGreen','BlueViolet','DarkOrchid','LightSlateGray','YellowGreen','CadetBlue','DarkTurquoise','Goldenrod','Orange','DeepPink','Tomato','DodgerBlue','DeepSkyBlue',
								'Coral','MediumSlateBlue','MediumSlateBlue','DarkSeaGreen','Gold','RosyBrown','GreenYellow','MediumAquamarine','PaleVioletRed','MediumPurple','DarkKhaki','MediumOrchid','MediumTurquoise',
								'CornflowerBlue','Salmon','Turquoise','LightCoral','SandyBrown','DarkSalmon','DarkGray','Aqua','Cyan','Fuchsia','Magenta','Yellow','LightGreen','Tan','LightSalmon','LightSalmon','HotPink',
								'BurlyWood','Orchid','PaleGreen','SkyBlue','Silver','LightSkyBlue','Aquamarine','LightSteelBlue','Plum','Violet','Khaki','LightBlue','Thistle','PowderBlue','LightPink','LightGray','PaleGoldenrod',
								'Wheat','NavajoWhite','Pink','PaleTurquoise','PeachPuff','Gainsboro','Moccasin','Bisque','BlanchedAlmond','AntiqueWhite','PapayaWhip','MistyRose','Lavender','Beige','LemonChiffon',
								'LightGoldenrodYellow','Linen','Cornsilk','OldLace','LightCyan','LightYellow','HoneyDew','WhiteSmoke','SeaShell','LavenderBlush','AliceBlue','FloralWhite','MintCream','Azure','Ivory','GhostWhite',
								'Snow','White']
			let width = p.windowWidth
          	let height = p.windowHeight
			let angleIncrement = p.radians(1)
			p.pixelDensity(1)

          p.windowResized = function() {
            p.resizeCanvas(p.windowWidth, p.windowHeight)
            fullReset()
          }

          function fullReset() {
            width = p.windowWidth
            height = p.windowHeight
			p.background(0)
			p.draw()
          }

			p.setup = function() {
				p.createCanvas(width, height)	
				p.strokeWeight(1)
				p.stroke(0.5)
				p.background(0)
				p.rectMode(p.CENTER)
			}

			p.draw = function() {
				p.background(0)
				let margin=0.1
				let origLen = Math.min(width,height)*(1-margin)/2
				angleIncrement=p.random([p.radians(1),p.radians(2),p.radians(4),p.radians(.5)])
				
				p.push()
				p.translate(width/2,height/2)

				p.stroke(p.random(htmlColors))
				p.fill(p.random(htmlColors))
				squire(-origLen/2,-origLen/2,origLen,angleIncrement)
				p.stroke(p.random(htmlColors))
				p.fill(p.random(htmlColors))
				squire(-origLen/2, origLen/2,origLen,angleIncrement)
				p.stroke(p.random(htmlColors))
				p.fill(p.random(htmlColors))
				squire( origLen/2, origLen/2,origLen,angleIncrement)
				p.stroke(p.random(htmlColors))
				p.fill(p.random(htmlColors))
				squire( origLen/2,-origLen/2,origLen,angleIncrement)
				p.pop()

				p.frameRate(1/2)

			}

			function squire(x,y,len,angle) {
				
				let shorterSide = Math.tan(angle)*len
				let longerSide = len - shorterSide
				let newLen = Math.sqrt(shorterSide**2+longerSide**2)
				console.log(len, newLen)

				if (len>4) {
					p.push()
					p.translate(x,y)
					p.rect(0,0,len)
					p.rotate(angle)
					squire(0,0,newLen,angleIncrement)
					p.pop()
				} else {
					console.log("Exit condition...")
				}



			}

		}

		let myp5 = new p5(s, "canvas")

    </script>
  </body>
</html>
