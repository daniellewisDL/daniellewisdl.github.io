<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Genuary 2023</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>body { font-family: monospace; }</style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.js"></script>
  </head>

  <body style="background-color: rgb(255, 255, 255);">
    <header>
      <h1>Genuary 2023 | Day 10 | Generative music</h1>
    </header>
    <div id="myCanvas"></div>

    <script>
      
      var s = function( p ) {

        let monoSynth;
        let width = 400
        let height = 200
        let frameRate = 10
        let velocity = 0.1

        p.setup = function() {
          p.createCanvas(width, height)
          p.background(0)
          p.frameRate(frameRate)
          monoSynth = new p5.MonoSynth()
        }

        p.draw = function() {
          p.background(0,1)
          if (p.frameCount % 3 == 0) {
            playBeat()
          }
          if (p.frameCount % 5 == 0) {
            playSynth()
          }
          if (p.frameCount % 2 == 0) {
            playHigh()
          }
        }

        function playBeat() {
          p.userStartAudio()
          monoSynth.play(p.random(['C2','D2','E2']),velocity,0,1/8)
          p.noStroke()
          p.fill(Math.random()*200,Math.random()*200,Math.random()*200,80)
          p.circle(Math.random()*width,Math.random()*height, Math.random()*300)
        }


        function playHigh() {
          p.userStartAudio()
          monoSynth.play(p.random(['C5','D5','E5','C4']),velocity,0,1/8)
          p.noStroke()
          p.fill(0,80)
          p.circle(Math.random()*width,Math.random()*height, Math.random()*100)
        }

        function playSynth() {
          p.userStartAudio();
          let note = p.random(['F4', 'G4', 'C4','A4','C5'])
          let time = 0 // time from now (in seconds)
          let dur = p.random([1/4,1/8,1]) // note duration (in seconds)
          monoSynth.play(note, velocity, time, dur)
          p.rect(Math.random()*width,Math.random()*height,Math.random()*100,Math.random()*200)
        }

      }
      
      let myp5 = new p5(s, "myCanvas")

    </script>
  </body>
</html>
